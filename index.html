<!DOCTYPE html>
<html lang="az">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1779293358827927"
    crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kart Oyunu</title>
    <link rel="stylesheet" href="style-new.css">
</head>
<body>
    <!-- Telegram profil resmi i√ßin arka plan -->
    <div id="profile-bg" class="profile-bg"></div>
    
    <div class="container">
        <div id="user-info">
            <!-- Telegram kullanƒ±cƒ± adƒ± buraya eklenecek -->
        </div>

        <div id="game-area" class="hidden">
            <div class="game-header">
                <h2>Yadda≈ü Oyunu</h2>
                <p id="level-display" class="level-display">S…ôviyy…ô: 1</p>
            </div>
            <div class="game-info">
                <p>H…ôr…ôk…ôt: <span id="moves">0</span></p>
                <p>Uyƒüun: <span id="matched">0</span>/<span id="total-pairs">8</span></p>
            </div>
            <div id="memory-board"></div>
            <button id="restart-button">Yenid…ôn Ba≈üla</button>
        </div>

        <div id="error-area" class="hidden">
            <p>Z…ôhm…ôt olmasa bu t…ôtbiq…ô Telegram daxilind…ôn daxil olun.</p>
        </div>
        
        <!-- Reklam √º√ß√ºn div -->
        <div id="ad-container" class="hidden">
            <div id="game-completed-ad">
                <h3>T…ôbrikl…ôr! S…ôviyy…ôni tamamladƒ±nƒ±z! üéâ</h3>
                <div id="ad-content"></div>
            </div>
        </div>
    </div>

    <script>
        // Check if we're in Telegram WebView
        const isTelegram = window.Telegram && window.Telegram.WebApp;
        
        // Show game immediately
        document.addEventListener('DOMContentLoaded', function() {
            // Show game area
            document.getElementById('game-area').classList.remove('hidden');
            
            // Load the game script
            const gameScript = document.createElement('script');
            gameScript.src = 'script.js';
            document.body.appendChild(gameScript);
            
            // Load Telegram WebApp script if in Telegram
            if (isTelegram) {
                const tgScript = document.createElement('script');
                tgScript.src = 'https://telegram.org/js/telegram-web-app.js';
                tgScript.onload = function() {
                    // Show Telegram user info
                    const tg = window.Telegram.WebApp;
                    tg.expand();
                    
                    const user = tg.initDataUnsafe?.user;
                    if (user) {
                        const userInfo = document.getElementById('user-info');
                        userInfo.innerHTML = `<p>Ho≈ü geldin, ${user.first_name || 'Oyuncu'}!</p>`;
                        
                        // Set profile photo as background if available
                        if (user.photo_url) {
                            const bg = document.getElementById('profile-bg');
                            bg.style.backgroundImage = `url('${user.photo_url}')`;
                            bg.classList.add('loaded');
                        }
                    }
                };
                document.body.appendChild(tgScript);
            }
        });
    </script>
</html>
