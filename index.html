<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reklam Sayfası</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
  }
  .controls {
    text-align: center;
    padding: 15px;
    background: #222;
    position: sticky;
    top: 0;
    z-index: 9999;
  }
  .btn {
    padding: 10px 20px;
    margin: 5px;
    font-size: 16px;
    cursor: pointer;
  }
  .ads-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    padding: 20px;
  }
  .ad-box {
    background: #111;
    padding: 10px;
    border: 1px solid #333;
    min-width: 160px;
    max-width: 728px;
  }
  iframe {
    max-width: 100%;
    border: none;
  }
</style>
</head>
<body>

<div class="controls">
  <button id="startBtn" class="btn">Başlat (3s Yenile)</button>
  <button id="stopBtn" class="btn">Durdur</button>
</div>

<div class="ads-wrapper" id="adsWrapper">
  <!-- Reklam 1 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : 'dc6d6397ca2140d96eda636efc009008',
        'format' : 'iframe',
        'height' : 250,
        'width' : 300,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/dc6d6397ca2140d96eda636efc009008/invoke.js"></script>
  </div>

  <!-- Reklam 2 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : '3165bb9ead9289ac8ccf41eb2a1fe725',
        'format' : 'iframe',
        'height' : 90,
        'width' : 728,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/3165bb9ead9289ac8ccf41eb2a1fe725/invoke.js"></script>
  </div>

  <!-- Reklam 3 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : '2fa7fa8b3c5be7e730ef99e9c437a42c',
        'format' : 'iframe',
        'height' : 600,
        'width' : 160,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/2fa7fa8b3c5be7e730ef99e9c437a42c/invoke.js"></script>
  </div>

  <!-- Reklam 4 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : '81ec3b214b26464352c7fc73b372b7fe',
        'format' : 'iframe',
        'height' : 300,
        'width' : 160,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/81ec3b214b26464352c7fc73b372b7fe/invoke.js"></script>
  </div>

  <!-- Reklam 5 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : 'bf7b78864536c0dd73496e6502e7f7d8',
        'format' : 'iframe',
        'height' : 60,
        'width' : 468,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/bf7b78864536c0dd73496e6502e7f7d8/invoke.js"></script>
  </div>

  <!-- Reklam 6 -->
  <div class="ad-box">
    <iframe src="https://www.revenuecpmgate.com/t03q4w7k4?key=e856e7b091878b706e97b09057eb32b8" width="300" height="250"></iframe>
  </div>

  <!-- Reklam 7 -->
  <div class="ad-box">
    <script type='text/javascript' src='//pl25075542.revenuecpmgate.com/08/d5/a8/08d5a84758ffc0d0f2dc4af2816d121e.js'></script>
  </div>

  <!-- Reklam 8 -->
  <div class="ad-box">
    <script type='text/javascript' src='//pl25075661.revenuecpmgate.com/b7/86/83/b78683cc54e467ade70cffb61da92366.js'></script>
  </div>

  <!-- Reklam 9 -->
  <div class="ad-box">
    <script type="text/javascript">
      atOptions = {
        'key' : 'd8c6bc97079210ffad1026e53cc1cfb1',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/d8c6bc97079210ffad1026e53cc1cfb1/invoke.js"></script>
  </div>
</div>

<script>
  let reloadInterval = null;
  const REFRESH_INTERVAL = 3000; // 3 saniye

  // Tüm reklamları göster
  function showAllAds() {
    const adBoxes = document.querySelectorAll('.ad-box');
    if (adBoxes.length === 0) {
      console.log('Reklam bulunamadı!');
      return;
    }
    
    adBoxes.forEach((ad, index) => {
      // Reklam kutusunu göster
      ad.style.display = 'block';
      ad.style.visibility = 'visible';
      ad.style.opacity = '1';
      ad.style.minHeight = '100px';
      ad.style.margin = '10px auto';
      ad.style.overflow = 'hidden';
      ad.style.borderRadius = '8px';
      ad.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
      
      // Reklam yükleniyor göstergesi
      let loading = ad.querySelector('.ad-loading');
      if (!loading) {
        loading = document.createElement('div');
        loading.className = 'ad-loading';
        loading.style.padding = '10px';
        loading.style.textAlign = 'center';
        loading.style.color = '#666';
        loading.textContent = 'Reklam yükleniyor...';
        ad.prepend(loading);
      }
    });
  }

  // Tüm reklamları yenile
  function refreshAds() {
    console.log('Reklamlar yenileniyor...');
    
    // Önce tüm reklamları göster
    showAllAds();
    
    // Tüm reklam kutularını al
    const adBoxes = document.querySelectorAll('.ad-box');
    
    // Her bir reklam kutusu için işlem yap
    adBoxes.forEach((adBox, index) => {
      // Reklam kutusunu göster
      adBox.style.display = 'block';
      adBox.style.visibility = 'visible';
      adBox.style.opacity = '1';
      
      // Yükleniyor göstergesini kaldır
      const loading = adBox.querySelector('.ad-loading');
      if (loading) {
        setTimeout(() => {
          loading.style.opacity = '0';
          setTimeout(() => loading.remove(), 300);
        }, 500);
      }
      
      // Iframe'leri yenile
      const iframe = adBox.querySelector('iframe');
      if (iframe) {
        try {
          // Mevcut kaynağı al
          const currentSrc = iframe.src.split('?')[0];
          if (currentSrc) {
            // Rastgele parametre ekleyerek yenile
            iframe.src = currentSrc + '?r=' + Math.random();
            
            // Iframe yüklendiğinde
            iframe.onload = function() {
              console.log(`Reklam ${index + 1} yüklendi`);
            };
          }
        } catch (e) {
          console.error('Reklam yüklenirken hata oluştu:', e);
        }
        try {
          iframe.src = iframeSources[index] + '?r=' + Math.random();
        } catch (e) {
          console.log('Reklam yüklenirken hata oluştu:', e);
        }
      }
      
      // Script tag'lerini yeniden yükle
      const scripts = adBox.querySelectorAll('script');
      scripts.forEach(script => {
        if (script.src) {
          const newScript = document.createElement('script');
          newScript.src = script.src;
          newScript.async = true;
          script.parentNode.replaceChild(newScript, script);
        }
      });
    });
  }

  // Otomatik yenilemeyi başlat
  function startAutoReload() {
    console.log('Otomatik yenileme başlatılıyor...');
    
    // Önceki interval'i temizle
    if (reloadInterval) {
      clearInterval(reloadInterval);
      reloadInterval = null;
    }
    
    // Tüm reklamları göster
    showAllAds();
    
    // İlk yenilemeyi hemen yap (kısa bir gecikmeyle)
    setTimeout(() => {
      // Reklamları yenile
      refreshAds();
      
      // Sonraki yenilemeleri planla
      reloadInterval = setInterval(() => {
        console.log('Reklamlar otomatik olarak yenileniyor...');
        refreshAds();
      }, REFRESH_INTERVAL);
      
      // Buton durumlarını güncelle
      document.getElementById('startBtn').disabled = true;
      document.getElementById('stopBtn').disabled = false;
      
      // Kullanıcıya bildirim göster
      const notification = document.createElement('div');
      notification.id = 'refresh-notification';
      notification.textContent = 'Reklamlar otomatik olarak yenileniyor';
      notification.style.position = 'fixed';
      notification.style.bottom = '20px';
      notification.style.right = '20px';
      notification.style.background = '#4CAF50';
      notification.style.color = 'white';
      notification.style.padding = '10px 20px';
      notification.style.borderRadius = '4px';
      notification.style.zIndex = '1000';
      
      // Eğer önceki bildirim varsa kaldır
      const existingNotification = document.getElementById('refresh-notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      document.body.appendChild(notification);
      
      // 3 saniye sonra bildirimi kaldır
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transition = 'opacity 0.5s';
        setTimeout(() => {
          if (notification && notification.parentNode) {
            notification.remove();
          }
        }, 500);
      }, 3000);
      
      console.log('Reklamlar otomatik yenileme başlatıldı. Yenileme aralığı:', REFRESH_INTERVAL + 'ms');
    }, 1000); // 1 saniye gecikme ile başlat
  }

  // Otomatik yenilemeyi durdur
  function stopAutoReload() {
    if (reloadInterval) {
      clearInterval(reloadInterval);
      reloadInterval = null;
    }
    
    // Buton durumlarını güncelle
    document.getElementById('startBtn').disabled = false;
    document.getElementById('stopBtn').disabled = true;
    
    console.log('Otomatik yenileme durduruldu.');
  }

  // Sayfa yüklendiğinde çalışacak kod
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Sayfa yüklendi, reklamlar hazırlanıyor...');
    
    // Tüm reklamları göster
    showAllAds();
    
    // Buton eventlerini bağla
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    
    if (startBtn) {
      startBtn.addEventListener('click', startAutoReload);
    }
    
    if (stopBtn) {
      stopBtn.addEventListener('click', stopAutoReload);
      stopBtn.disabled = true; // Başlangıçta durdur butonunu devre dışı bırak
    }
    
    // Sayfa yüklendiğinde otomatik başlat
    if (startBtn) {
      // Kısa bir gecikmeyle başlat
      setTimeout(() => {
        startAutoReload();
      }, 2000);
    }
    
    console.log('Sayfa yüklendi, reklamlar hazır.');
  });
</script>

</body>
</html>
