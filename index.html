<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Özel Sohbet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #kullanici-listesi {
            text-align: left;
            margin-left: 20px;
            float: left;
            width: 30%;
            border-right: 1px solid #ccc;
        }

        #sohbet-alani {
            float: left;
            width: 60%;
            padding-left: 20px;
        }

        #mesajlar {
            height: 300px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }

        input[type="text"] {
            padding: 8px;
            font-size: 18px;
            width: 70%;
        }

        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Özel Sohbet</h1>
    <div id="kullanici-listesi">
        <h2>Online Kullanıcılar</h2>
        <ul id="online-kullanicilar"></ul>
    </div>
    <div id="sohbet-alani">
        <h2>Sohbet</h2>
        <div id="mesajlar"></div>
        <input type="text" id="mesaj" placeholder="Mesajınızı yazın...">
        <button onclick="gonderMesaj()">Gönder</button>
    </div>

    <script>
        var kullaniciAdi = prompt("Lütfen kullanıcı adınızı girin:");
        var onlineKullanicilar = [];

        // Kullanıcı adını gönder
        socket.emit("kullanici_giris", kullaniciAdi);

        // Kullanıcı listesi güncelleme
        socket.on("online_kullanicilar", function(kullanicilar) {
            onlineKullanicilar = kullanicilar;
            guncelleKullaniciListesi();
        });

        // Mesajları al
        socket.on("mesaj_al", function(mesaj) {
            var mesajlarDiv = document.getElementById("mesajlar");
            mesajlarDiv.innerHTML += "<p><strong>" + mesaj.gonderen + ":</strong> " + mesaj.icerik + "</p>";
            mesajlarDiv.scrollTop = mesajlarDiv.scrollHeight;
        });

        // Kullanıcı listesini güncelle
        function guncelleKullaniciListesi() {
            var onlineKullanicilarListesi = document.getElementById("online-kullanicilar");
            onlineKullanicilarListesi.innerHTML = "";
            onlineKullanicilar.forEach(function(kullanici) {
                var li = document.createElement("li");
                li.textContent = kullanici;
                onlineKullanicilarListesi.appendChild(li);
            });
        }

        // Mesajı gönder
        function gonderMesaj() {
            var mesaj = document.getElementById("mesaj").value;
            socket.emit("mesaj_gonder", { gonderen: kullaniciAdi, icerik: mesaj });
            document.getElementById("mesaj").value = "";
        }
    </script>
</body>
</html>
