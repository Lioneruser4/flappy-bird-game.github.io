<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reklam Sayfası</title>
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1779293358827927" crossorigin="anonymous"></script>
<style>
  body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
  }
  .controls {
    text-align: center;
    padding: 15px;
    background: #222;
    position: sticky;
    top: 0;
    z-index: 9999;
  }
  .btn {
    padding: 10px 20px;
    margin: 5px;
    font-size: 16px;
    cursor: pointer;
  }
  .ads-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    padding: 20px;
  }
  .ad-box {
    background: #111;
    padding: 10px;
    border: 1px solid #333;
    min-width: 160px;
    max-width: 728px;
  }
  iframe {
    max-width: 100%;
    border: none;
  }
</style>
</head>
<body>

<div class="controls">
  <button id="startBtn" class="btn">Başlad 3s Yenile</button>
  <button id="stopBtn" class="btn">S T O P </button>
</div>

<div id="ad-container" style="margin: 20px auto; text-align: center;">
  <!-- Reklam kodu buraya eklenecek -->
  <div style="width: 320px; height: 100px; margin: 0 auto; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
    Reklam Alanı
  </div>
</div>

<div id="game-area">
  <div class="ads-wrapper" id="adsWrapper">
    <!-- Reklam 1 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : 'dc6d6397ca2140d96eda636efc009008',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/dc6d6397ca2140d96eda636efc009008/invoke.js"></script>
    </div>

    <!-- Reklam 2 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : '3165bb9ead9289ac8ccf41eb2a1fe725',
          'format' : 'iframe',
          'height' : 90,
          'width' : 728,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/3165bb9ead9289ac8ccf41eb2a1fe725/invoke.js"></script>
    </div>

    <!-- Reklam 3 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : '2fa7fa8b3c5be7e730ef99e9c437a42c',
          'format' : 'iframe',
          'height' : 600,
          'width' : 160,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/2fa7fa8b3c5be7e730ef99e9c437a42c/invoke.js"></script>
    </div>

    <!-- Reklam 4 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : '81ec3b214b26464352c7fc73b372b7fe',
          'format' : 'iframe',
          'height' : 300,
          'width' : 160,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/81ec3b214b26464352c7fc73b372b7fe/invoke.js"></script>
    </div>

    <!-- Reklam 5 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : 'bf7b78864536c0dd73496e6502e7f7d8',
          'format' : 'iframe',
          'height' : 60,
          'width' : 468,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/bf7b78864536c0dd73496e6502e7f7d8/invoke.js"></script>
    </div>

    <!-- Reklam 6 -->
    <div class="ad-box">
      <iframe src="https://www.revenuecpmgate.com/t03q4w7k4?key=e856e7b091878b706e97b09057eb32b8" width="300" height="250"></iframe>
    </div>

    <!-- Reklam 7 -->
    <div class="ad-box">
      <script type='text/javascript' src='//pl25075542.revenuecpmgate.com/08/d5/a8/08d5a84758ffc0d0f2dc4af2816d121e.js'></script>
    </div>

    <!-- Reklam 8 -->
    <div class="ad-box">
      <script type='text/javascript' src='//pl25075661.revenuecpmgate.com/b7/86/83/b78683cc54e467ade70cffb61da92366.js'></script>
    </div>

    <!-- Reklam 9 -->
    <div class="ad-box">
      <script type="text/javascript">
        atOptions = {
          'key' : 'd8c6bc97079210ffad1026e53cc1cfb1',
          'format' : 'iframe',
          'height' : 50,
          'width' : 320,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/d8c6bc97079210ffad1026e53cc1cfb1/invoke.js"></script>
    </div>
  </div>
</div>

<script>
  let refreshTimeout;
  let isAutoRefresh = true;
  const REFRESH_INTERVAL = 2000; // 2 saniye

  // Tüm reklam iframelerini yeniden yükle
  function reloadAllIframes() {
    if (!isAutoRefresh) return;
    
    // Önce tüm reklamları göster
    const adContainer = document.getElementById('ad-container');
    const adsWrapper = document.getElementById('adsWrapper');
    
    if (adContainer) {
      adContainer.style.display = 'block';
      adContainer.style.visibility = 'visible';
      adContainer.style.opacity = '1';
    }
    
    if (adsWrapper) {
      adsWrapper.style.display = 'flex';
      adsWrapper.style.visibility = 'visible';
      adsWrapper.style.opacity = '1';
    }
    
    // Tüm reklam kutularını göster
    const adBoxes = document.querySelectorAll('.ad-box');
    adBoxes.forEach(ad => {
      ad.style.display = 'block';
      ad.style.visibility = 'visible';
      ad.style.opacity = '1';
      
      // Reklam scriptlerini kontrol et ve yeniden yükle
      const scripts = ad.getElementsByTagName('script');
      for (let script of scripts) {
        if (script.src) {
          const newScript = document.createElement('script');
          newScript.src = script.src;
          newScript.async = true;
          script.parentNode.replaceChild(newScript, script);
        }
      }
    });
    
    // Tüm iframeleri yeniden yükle
    const iframes = document.querySelectorAll('iframe');
    if (iframes.length === 0) {
      // Eğer iframe yoksa, yeni iframeler oluştur
      adBoxes.forEach(ad => {
        const iframe = document.createElement('iframe');
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = 'none';
        ad.appendChild(iframe);
      });
      return;
    }
    
    iframes.forEach(iframe => {
      try {
        const src = iframe.src.split('?')[0];
        if (src) {
          iframe.src = src + '?r=' + Math.random();
        }
      } catch (e) {
        console.log('Reklam yüklenirken hata oluştu:', e);
      }
    });
  }

  // Sayfa yenileme işlemini başlat
  function startAutoRefresh() {
    isAutoRefresh = true;
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    
    if (startBtn) startBtn.disabled = true;
    if (stopBtn) stopBtn.disabled = false;
    
    // İlk yenilemeyi hemen yap
    reloadAllIframes();
    
    // Sonraki yenilemeler için zamanlayıcıyı ayarla
    scheduleNextRefresh();
  }
  
  // Bir sonraki yenilemeyi planla
  function scheduleNextRefresh() {
    if (!isAutoRefresh) return;
    
    clearTimeout(refreshTimeout);
    refreshTimeout = setTimeout(() => {
      if (isAutoRefresh) {
        reloadAllIframes();
        scheduleNextRefresh();
      }
    }, REFRESH_INTERVAL);
  }
  
  // Otomatik yenilemeyi durdur
  function stopAutoRefresh() {
    isAutoRefresh = false;
    clearTimeout(refreshTimeout);
    document.getElementById('startBtn').disabled = false;
    document.getElementById('stopBtn').disabled = true;
  }

  // Sayfayı tamamen yenile
  function fullPageRefresh() {
    window.location.reload(true); // true parametresi cache'i bypass eder
  }

  // Sayfa yüklendiğinde çalışacak kod
  document.addEventListener('DOMContentLoaded', function() {
    // Önce tüm reklamları göster
    const adContainer = document.getElementById('ad-container');
    const adsWrapper = document.getElementById('adsWrapper');
    
    if (adContainer) {
      adContainer.style.display = 'block';
      adContainer.style.visibility = 'visible';
      adContainer.style.opacity = '1';
    }
    
    if (adsWrapper) {
      adsWrapper.style.display = 'flex';
      adsWrapper.style.visibility = 'visible';
      adsWrapper.style.opacity = '1';
    }
    
    // Buton durumlarını ayarla
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    
    // Buton eventlerini bağla
    if (startBtn) {
      startBtn.disabled = false;
      startBtn.addEventListener('click', startAutoRefresh);
    }
    
    if (stopBtn) {
      stopBtn.disabled = true;
      stopBtn.addEventListener('click', stopAutoRefresh);
    }
    
    // Sayfa yüklendiğinde otomatik başlat (kısa bir gecikmeyle)
    setTimeout(() => {
      // Tüm reklam scriptlerini yeniden yükle
      const scripts = document.querySelectorAll('script[src*="highperformanceformat"], script[src*="revenuecpmgate"]');
      scripts.forEach(script => {
        const newScript = document.createElement('script');
        newScript.src = script.src;
        newScript.async = true;
        script.parentNode.replaceChild(newScript, script);
      });
      
      // Otomatik yenilemeyi başlat
      startAutoRefresh();
    }, 1000);
  });

  function hideAds() {
    // Bu fonksiyon artık kullanılmıyor
  }

  function startAutoReload() {
    // Bu fonksiyon artık kullanılmıyor
    // Sayfa zaten otomatik olarak yenilenecek
  }

  function stopAutoReload() {
    localStorage.setItem("autoReload", "false"); // kaydet
    if (reloadInterval) {
      clearInterval(reloadInterval);
      reloadInterval = null;
    }
  }

  // Sayfa açıldığında otomatik başlat
  window.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("autoReload") === "true") {
      startAutoReload();
    }
  });

  document.getElementById('startBtn').addEventListener('click', startAutoReload);
  document.getElementById('stopBtn').addEventListener('click', stopAutoReload);
</script>

</body>
</html>
